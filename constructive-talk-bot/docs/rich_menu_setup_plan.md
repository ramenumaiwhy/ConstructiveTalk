# LINE Botリッチメニューセットアップ計画

## 現状
✅ リッチメニュー画像の生成が完了
- メインメニュー画像 (2500x1686px)
- 会話メニュー画像 (2500x1686px)

## 実装計画

### 1. リッチメニューの登録
1. メインメニューの登録
   - 2x2グリッドレイアウト
   - アクション：
     - 会話を始める
     - お酒レベル設定
     - 話題を変える
     - ヘルプ

2. 会話メニューの登録
   - 1x3グリッドレイアウト
   - アクション：
     - 話を深める
     - 話題を変える
     - 会話を終える

### 2. リッチメニューエイリアスの設定
```typescript
const RICH_MENU_ALIASES = {
  main: 'menu_main',
  conversation: 'menu_conversation'
};
```

### 3. デフォルトメニューの設定
- 初期状態：メインメニュー
- 会話開始時：会話メニューに切り替え
- 会話終了時：メインメニューに戻る

### 4. 実装手順
1. LINE Messaging APIを使用したリッチメニュー登録
2. 生成した画像のアップロード
3. メニュー切り替えロジックの実装
4. エラーハンドリングの追加

### 5. テスト項目
- [ ] メインメニューの表示確認
- [ ] 各ボタンのアクション確認
- [ ] メニュー切り替えの動作確認
- [ ] エラー時の挙動確認

## 技術的な注意点

### 1. リッチメニュー作成時の制約
- 画像サイズ：2500x1686px（フル）、2500x843px（ハーフ）
- ファイル形式：JPEG or PNG
- ファイルサイズ：上限1MB

### 2. APIリクエスト制限
- リッチメニュー作成：1000件/月
- 画像アップロード：上限1MB/リクエスト

### 3. エラーハンドリング
```typescript
try {
  await richMenuManager.createAndUpload();
} catch (error) {
  if (error instanceof LineAPIError) {
    // LINE API特有のエラー処理
  } else if (error instanceof ImageUploadError) {
    // 画像アップロード時のエラー処理
  }
}
```

## 実装スケジュール

### Day 1: 基本実装
- [ ] リッチメニューマネージャーの実装
- [ ] メインメニューの登録と画像アップロード
- [ ] 基本的なエラーハンドリング

### Day 2: 拡張実装
- [ ] 会話メニューの登録と画像アップロード
- [ ] メニュー切り替えロジックの実装
- [ ] 詳細なエラーハンドリング

### Day 3: テストと調整
- [ ] 全機能の動作テスト
- [ ] エッジケースの確認
- [ ] 必要に応じた調整とバグ修正 